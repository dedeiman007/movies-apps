{"remainingRequest":"/Users/user/Documents/dede/movies/node_modules/babel-loader/lib/index.js!/Users/user/Documents/dede/movies/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/user/Documents/dede/movies/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/user/Documents/dede/movies/src/components/ButtonAddToList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/user/Documents/dede/movies/src/components/ButtonAddToList.vue","mtime":1656751182065},{"path":"/Users/user/Documents/dede/movies/babel.config.js","mtime":1656700928736},{"path":"/Users/user/Documents/dede/movies/node_modules/cache-loader/dist/cjs.js","mtime":1656700998765},{"path":"/Users/user/Documents/dede/movies/node_modules/babel-loader/lib/index.js","mtime":1656701003546},{"path":"/Users/user/Documents/dede/movies/node_modules/cache-loader/dist/cjs.js","mtime":1656700998765},{"path":"/Users/user/Documents/dede/movies/node_modules/vue-loader/lib/index.js","mtime":1656701019304}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIG1vdmllOiB7CiAgICAgIHR5cGU6IE9iamVjdAogICAgfSwKICAgIHNob3J0OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNfYWRkZWQ6IGZhbHNlLAogICAgICBrZXk6ICdteS1tb3ZpZS1saXN0JwogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgdmFyIHJhd19saXN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpOwoKICAgIGlmIChyYXdfbGlzdCkgewogICAgICB2YXIgbGlzdCA9IEpTT04ucGFyc2UocmF3X2xpc3QpOwogICAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgaWYgKGl0ZW0uaWQgPT0gdGhpcy5tb3ZpZS5pZCkgewogICAgICAgICAgdGhpcy5pc19hZGRlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICB0b2dnbGVMaXN0KCkgewogICAgICBpZiAodGhpcy5pc19hZGRlZCkgewogICAgICAgIHZhciBhZGRlZF9yYXdfbGlzdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTsKICAgICAgICB2YXIgYWRkZWRfbGlzdCA9IEpTT04ucGFyc2UoYWRkZWRfcmF3X2xpc3QpOwoKICAgICAgICBpZiAoYWRkZWRfbGlzdC5sZW5ndGggPT0gMSkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5rZXkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgaW5kZXggPSBhZGRlZF9saXN0LmZpbmRJbmRleChpdGVtID0+IHsKICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaWQgPT0gdGhpcy5tb3ZpZS5pZDsKICAgICAgICAgIH0pOwogICAgICAgICAgYWRkZWRfbGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5rZXksIEpTT04uc3RyaW5naWZ5KGFkZGVkX2xpc3QpKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuaXNfYWRkZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLiRlbWl0KCdyZW1vdmVGcm9tTGlzdCcpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciByYXdfbGlzdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMua2V5KTsKCiAgICAgICAgaWYgKHJhd19saXN0KSB7CiAgICAgICAgICB2YXIgbGlzdCA9IEpTT04ucGFyc2UocmF3X2xpc3QpOwogICAgICAgICAgbGlzdC5wdXNoKHRoaXMubW92aWUpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5rZXksIEpTT04uc3RyaW5naWZ5KGxpc3QpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIG5ld19saXN0ID0gW3RoaXMubW92aWVdOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5rZXksIEpTT04uc3RyaW5naWZ5KG5ld19saXN0KSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmlzX2FkZGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AAuBA;EACAA;IACAC;MACAA;IADA,CADA;IAIAC;MACAD;IADA,CAJA;IAOAE;MACAF;IADA;EAPA,CADA;;EAYAG;IACA;MACAC,eADA;MAEAC;IAFA;EAIA,CAjBA;;EAkBAC;IACA;;IACA;MACA;MACAC;QACA;UACA;QACA;MACA,CAJA;IAKA;EACA,CA5BA;;EA6BAC;IACAC;MACA;QACA;QACA;;QACA;UACAC;QACA,CAFA,MAEA;UACA;YACA;UACA,CAFA;UAGAC;UACAD;QACA;;QACA;QACA;MACA,CAdA,MAcA;QACA;;QACA;UACA;UACAH;UACAG;QACA,CAJA,MAIA;UACA;UACAA;QACA;;QACA;MACA;IACA;;EA5BA;AA7BA","names":["props","type","movie","short","data","is_added","key","created","list","methods","toggleList","localStorage","added_list"],"sourceRoot":"src/components","sources":["ButtonAddToList.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <button :class=\"{'btn add-to-list': true, 'short': short}\" @click=\"toggleList()\">\r\n            <svg width=\"16\" height=\"12\" viewBox=\"0 0 16 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-if=\"is_added\">\r\n                <path d=\"M13.5938 0.625L5.375 8.84375L2.375 5.8125C2.21875 5.6875 1.96875 5.6875 1.84375 5.8125L0.9375 6.71875C0.8125 6.84375 0.8125 7.09375 0.9375 7.25L5.125 11.4062C5.28125 11.5625 5.5 11.5625 5.65625 11.4062L15.0312 2.03125C15.1562 1.90625 15.1562 1.65625 15.0312 1.5L14.125 0.625C14 0.46875 13.75 0.46875 13.5938 0.625Z\" fill=\"white\"/>\r\n            </svg>\r\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" v-else>\r\n                <path d=\"M11.5 5H7V0.5C7 0.25 6.75 0 6.5 0H5.5C5.21875 0 5 0.25 5 0.5V5H0.5C0.21875 5 0 5.25 0 5.5V6.5C0 6.78125 0.21875 7 0.5 7H5V11.5C5 11.7812 5.21875 12 5.5 12H6.5C6.75 12 7 11.7812 7 11.5V7H11.5C11.75 7 12 6.78125 12 6.5V5.5C12 5.25 11.75 5 11.5 5Z\" fill=\"white\"/>\r\n            </svg>\r\n            <template v-if=\"!short\">\r\n                <div class=\"text\" v-if=\"is_added\">\r\n                    Added To List\r\n                </div>\r\n                <div class=\"text\" v-else>\r\n                    Add To List\r\n                </div>\r\n            </template>\r\n        </button>\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        type: {\r\n            type: String\r\n        },\r\n        movie: {\r\n            type: Object\r\n        },\r\n        short: {\r\n            type: Boolean\r\n        }\r\n    },\r\n    data() {\r\n        return{\r\n            is_added: false,\r\n            key: 'my-movie-list'\r\n        }\r\n    },\r\n    created() {\r\n        var raw_list = localStorage.getItem(this.key)\r\n        if(raw_list) {\r\n            var list = JSON.parse(raw_list)\r\n            list.forEach((item)=>{\r\n                if(item.id == this.movie.id) {\r\n                    this.is_added = true\r\n                }\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        toggleList() {\r\n            if(this.is_added) {\r\n                var added_raw_list = localStorage.getItem(this.key)\r\n                var added_list = JSON.parse(added_raw_list)\r\n                if(added_list.length == 1){\r\n                    localStorage.removeItem(this.key)\r\n                }else{\r\n                    var index = added_list.findIndex((item)=>{\r\n                        return item.id == this.movie.id\r\n                    })\r\n                    added_list.splice(index, 1)\r\n                    localStorage.setItem(this.key, JSON.stringify(added_list))\r\n                }\r\n                this.is_added = false\r\n                this.$emit('removeFromList')\r\n            }else{\r\n                var raw_list = localStorage.getItem(this.key)\r\n                if(raw_list) {\r\n                    var list = JSON.parse(raw_list)\r\n                    list.push(this.movie)\r\n                    localStorage.setItem(this.key, JSON.stringify(list))\r\n                }else{\r\n                    var new_list = [this.movie]\r\n                    localStorage.setItem(this.key, JSON.stringify(new_list))\r\n                }\r\n                this.is_added = true\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>"]}]}